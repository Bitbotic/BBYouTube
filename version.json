{
  "version": 1,
  "lib": "Lypqc2hpbnQgZXNuZXh0OiB0cnVlICovCi8vQ29uc3RhbnRzCnZhciBCQllUS0V2ZW50TGFiZWxzID0gewogIGVtYmVkZGVkOiAiZW1iZWRkZWQiLAogIGRldGFpbHBhZ2U6ICJkZXRhaWxwYWdlIgp9OwoKdmFyIEJCWVRLUmVzdWx0Q29kZSA9IHsKICBjb3JyZWN0OiAwLAogIHlvdXR1YmVWaWRlb0lkRW1wdHk6IDEsCiAgcmVxdWVzdEZhaWxlZDogMiwKICBtYXhOdW1iZXJPZlJlcXVlc3RzUmVhY2hlZDogMywKfTsKCnZhciBCQllUS0Vycm9ycyA9IHsKICBub0Vycm9yOiAiQkJZVERMTm9FcnJvciIsCiAgdmlkZW9FcnJvckRvbWFpbjogIkJCWVRETFZpZGVvRXJyb3IiLAogIHlvdVR1YmVFcnJvclVzZUNpcGhlclNpZ25hdHVyZTogLTEwMDAsCiAgeW91VHViZUVycm9yTm9TdHJlYW1BdmFpbGFibGU6IC0yLAogIHlvdVR1YmVFcnJvck5ldHdvcms6IC0xLAogIHlvdVR1YmVFcnJvckludmFsaWRWaWRlb0lkZW50aWZpZXI6IDIsCiAgeW91VHViZUVycm9yUmVzdHJpY3RlZFBsYXliYWNrOiAxNTAsCiAgZXJyb3JEZXNjcmlwdGlvbkluZm9LZXk6ICJlRGVzY3JpcHRpb25LZXkiLAogIG5vU3RyZWFtVmlkZW9Vc2VySW5mb0tleTogIk5vU3RyZWFtVmlkZW8iCn07Cgp2YXIgQkJZVERMS1VybHMgPSB7CiAgZ2V0VmlkZW9JbmZvOiAiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZ2V0X3ZpZGVvX2luZm8/IiwKICB3YXRjaFZpZGVvOiAiaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/IiwKICBlbWJlZFVSTFN0cmluZzogImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLyIKfTsKCnZhciBCQllURExLUmVxdWVzdFR5cGVzID0gewogIGdldFZpZGVvSW5mbzogMCwKICB3YXRjaFZpZGVvOiAxLAogIGVtYmVkUGFnZTogMiwKICBqYXZhU2NyaXB0UGxheWVyOiAzLAp9OwoKdmFyIEJCWVRETEtNaXNjID0gewogIGFsbG93ZWRDb3VudHJpZXNVc2VySW5mb0tleTogIkFsbG93ZWRDb3VudHJpZXMiLAoKICB2aWRlb1F1YWxpdHlIVFRQTGl2ZVN0cmVhbWluZzogIkhUVFBMaXZlU3RyZWFtaW5nIiwKfTsKCi8vR2xvYmFsIHZhcnMKdmFyIGRlYnVnID0gdHJ1ZTsKdmFyIHJlcXVlc3RDb3VudCA9IDA7Cgp2YXIgeXRkbCA9IHsKICB2aWRlb0lkZW50aWZpZXI6ICIiLAogIGxhbmd1YWdlSWRlbnRpZmllcjogImVuIiwKICB1c2VFdmVudExhYmVsczogW0JCWVRLRXZlbnRMYWJlbHMuZW1iZWRkZWQsIEJCWVRLRXZlbnRMYWJlbHMuZGV0YWlscGFnZV0sCiAgY3VycmVudFJlcXVlc3RUeXBlOiBCQllURExLUmVxdWVzdFR5cGVzLmdldFZpZGVvSW5mbywKICByZXN1bHQ6IHt9LAogIGxhc3RFcnJvcjoge30sCiAgbm9TdHJlYW1WaWRlbzoge30sCiAgeW91VHViZUVycm9yOiB7fSwKICB3ZWJwYWdlOiAiIiwKICBwbGF5ZXJTY3JpcHQ6IG51bGwsCiAgZ2V0VmlkZW86IGZ1bmN0aW9uKHlvdXR1YmVWaWRlb0lkLCBsYW5ndWFnZUlkKXsKCi8vICAgIGlmIChkZWJ1ZykgewovLyAgICAgIHlvdXR1YmVWaWRlb0lkID0gIl96UjZST2pvT1gwIjsKLy8gICAgICBsYW5ndWFnZUlkID0gImVzIjsKLy8gICAgfQoKICAgIGlmKHlvdXR1YmVWaWRlb0lkICYmIGxhbmd1YWdlSWQgJiYgeW91dHViZVZpZGVvSWQgIT09ICIiICYmIGxhbmd1YWdlSWQgIT09ICIiKSB7CiAgICAgIHRoaXMudmlkZW9JZGVudGlmaWVyID0geW91dHViZVZpZGVvSWQ7CiAgICAgIHRoaXMubGFuZ3VhZ2VJZGVudGlmaWVyID0gbGFuZ3VhZ2VJZDsKICAgICAgLy9jb25zb2xlLmxvZygiR2V0dGluZyB2aWRlbzogaWQgPT4gIiArIHRoaXMudmlkZW9JZGVudGlmaWVyICsgIiwgbGFuZ3VhZ2UgaWQgPT4gIiArIHRoaXMubGFuZ3VhZ2VJZGVudGlmaWVyKTsKICAgICAgdGhpcy5zdGFydE5leHRSZXF1ZXN0KCk7CiAgICB9CiAgICBlbHNlIHsKICAgICAgcmVzdWx0LmNvZGUgPSBCQllUS1Jlc3VsdENvZGUueW91dHViZVZpZGVvSWRFbXB0eTsKICAgICAgcmVzdWx0Lm1lc3NhZ2UgPSAiVmlkZW8gYW5kIExhbmd1YWdlIElEcyBtdXN0IGJlIGRlZmluZWQiOwogICAgICB5dGRsQ2FsbGJhY2soSlNPTi5zdHJpbmdpZnkocmVzdWx0KSk7CiAgICAgIHJldHVybjsKICAgIH0KICB9LAogIHN0YXJ0TmV4dFJlcXVlc3Q6IGZ1bmN0aW9uKCkgewogICAgaWYgKHRoaXMudXNlRXZlbnRMYWJlbHMubGVuZ3RoID4gMCkgewogICAgICB2YXIgZXZlbnRMYWJlbCA9IHRoaXMudXNlRXZlbnRMYWJlbHNbMF07CiAgICAgIHRoaXMudXNlRXZlbnRMYWJlbHMuc3BsaWNlKDAsIDEpOwogICAgICB0aGlzLnN0YXJ0UmVxdWVzdFdpdGhEYXRhKHRoaXMudmlkZW9JZGVudGlmaWVyLCB0aGlzLmxhbmd1YWdlSWRlbnRpZmllciwgQkJZVERMS1JlcXVlc3RUeXBlcy5nZXRWaWRlb0luZm8sIGV2ZW50TGFiZWwpOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFJlcXVlc3RUeXBlID09PSBCQllURExLUmVxdWVzdFR5cGVzLndhdGNoVmlkZW8pIHsKICAgICAgICB0aGlzLnJlc3VsdC5jb2RlID0gQkJZVEtSZXN1bHRDb2RlLnJlcXVlc3RGYWlsZWQ7CiAgICAgICAgdGhpcy5yZXN1bHQubWVzc2FnZSA9ICJWaWRlbyBhbmQgTGFuZ3VhZ2UgSURzIG11c3QgYmUgZGVmaW5lZCI7CiAgICAgICAgeXRkbENhbGxiYWNrKEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBlbHNlwqB7CiAgICAgICAgdGhpcy5zdGFydFdhdGNoUGFnZVJlcXVlc3QoKTsKICAgICAgfQogICAgfQogIH0sCiAgc3RhcnRSZXF1ZXN0V2l0aERhdGE6IGZ1bmN0aW9uKHZpZGVvSWRlbnRpZmllciwgbGFuZ3VhZ2VJZGVudGlmaWVyLCByZXF1ZXN0VHlwZSwgZXZlbnRMYWJlbCkgewogICAgdGhpcy5jdXJyZW50UmVxdWVzdFR5cGUgPSByZXF1ZXN0VHlwZTsKICAgIEJCWVRETFV0aWxzLnNlbmRZVFJlcXVlc3QodmlkZW9JZGVudGlmaWVyLCBsYW5ndWFnZUlkZW50aWZpZXIsIHJlcXVlc3RUeXBlLCBldmVudExhYmVsLCBmdW5jdGlvbihlcnIsIHJlc3BvbnNlKXsKICAgICAgaWYgKGVycikgewogICAgICAgIHRoaXMuZmluaXNoV2l0aEVycm9yKGVycik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgfQogICAgfS5iaW5kKHRoaXMpKTsKICB9LAogIHN0YXJ0V2F0Y2hQYWdlUmVxdWVzdDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnN0YXJ0UmVxdWVzdFdpdGhEYXRhKHRoaXMudmlkZW9JZGVudGlmaWVyLCB0aGlzLmxhbmd1YWdlSWRlbnRpZmllciwgQkJZVERMS1JlcXVlc3RUeXBlcy53YXRjaFZpZGVvLCAiIik7CiAgfSwKICBmaW5pc2hXaXRoRXJyb3I6IGZ1bmN0aW9uKGVycil7CiAgICB0aGlzLnJlc3VsdC5jb2RlID0gZXJyLmNvZGU7CiAgICB0aGlzLnJlc3VsdC5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7CiAgICB5dGRsQ2FsbGJhY2soSlNPTi5zdHJpbmdpZnkodGhpcy5yZXN1bHQpKTsKICB9LAogIGZpbmlzaFdpdGhWaWRlbzogZnVuY3Rpb24odmlkZW8pIHsKICAgIGpzb24gPSB7CiAgICAgIHRpdGxlOiB2aWRlby50aXRsZSwKICAgICAgZHVyYXRpb246IHZpZGVvLmR1cmF0aW9uLAogICAgICBleHBpcmF0aW9uOiB2aWRlby5leHBpcmF0aW9uRGF0ZSwKICAgICAgdXJsczogdmlkZW8uc3RyZWFtVVJMcwogICAgfQogICAgeXRkbENhbGxiYWNrKEpTT04uc3RyaW5naWZ5KGpzb24pKTsKICB9LAogIHByb2Nlc3NSZXNwb25zZTogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgIHN3aXRjaCAodGhpcy5jdXJyZW50UmVxdWVzdFR5cGUpIHsKICAgICAgY2FzZSBCQllURExLUmVxdWVzdFR5cGVzLmdldFZpZGVvSW5mbzoKICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlR2V0VmlkZW9JbmZvKEJCWVRETFV0aWxzLnF1ZXJ5U3RyaW5nVG9PYmplY3QocmVzcG9uc2UpKTsKICAgICAgICAgIGJyZWFrOwogICAgICBjYXNlIEJCWVRETEtSZXF1ZXN0VHlwZXMud2F0Y2hWaWRlbzoKICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlV2l0aEhUTUxTdHJpbmcocmVzcG9uc2UpOwogICAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgQkJZVERMS1JlcXVlc3RUeXBlcy5lbWJlZFBhZ2U6CiAgICAgICAgICB0aGlzLnByb2Nlc3NSZXNwb25zZVdpdGhIVE1MU3RyaW5nKHJlc3BvbnNlKTsKICAgICAgICAgIGJyZWFrOwogICAgICBjYXNlIEJCWVRETEtSZXF1ZXN0VHlwZXMuamF2YVNjcmlwdFBsYXllcjoKICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlSmF2YVNjcmlwdFBsYXllcldpdGhTY3JpcHQocmVzcG9uc2UpOwogICAgICAgICAgYnJlYWs7CiAgICB9CiAgfSwKICBwcm9jZXNzUmVzcG9uc2VHZXRWaWRlb0luZm86IGZ1bmN0aW9uKGluZm8pIHsKICAgIHZhciB2aWRlbyA9IG5ldyBCQllURExZb3VUdWJlVmlkZW8odGhpcy52aWRlb0lkZW50aWZpZXIsIGluZm8sIHRoaXMucGxheWVyU2NyaXB0KTsKICAgIGlmICh2aWRlby5lcnJvci5lcnJvckNvZGUgPT09IEJCWVRLRXJyb3JzLm5vRXJyb3IpIHsKICAgICAgdGhpcy5maW5pc2hXaXRoVmlkZW8odmlkZW8pOwogICAgfQogICAgZWxzZSB7CiAgICAgIGlmICh2aWRlby5lcnJvci5lcnJvckRvbWFpbiA9PT0gQkJZVEtFcnJvcnMudmlkZW9FcnJvckRvbWFpbiAmJiB2aWRlby5lcnJvci5lcnJvckNvZGUgPT09IEJCWVRLRXJyb3JzLnlvdVR1YmVFcnJvclVzZUNpcGhlclNpZ25hdHVyZSApIHsKICAgICAgICB0aGlzLm5vU3RyZWFtVmlkZW8gPSB2aWRlby5lcnJvci5lcnJvckluZm9bQkJZVEtFcnJvcnMubm9TdHJlYW1WaWRlb1VzZXJJbmZvS2V5XTsKICAgICAgICB0aGlzLnN0YXJ0V2F0Y2hQYWdlUmVxdWVzdCgpOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHRoaXMubGFzdEVycm9yID0gdmlkZW8uZXJyb3I7CiAgICAgICAgaWYgKHZpZGVvLmVycm9yLmVycm9yQ29kZSA+IDApCiAgICAgICAgICB0aGlzLnlvdVR1YmVFcnJvciA9IHZpZGVvLmVycm9yOwogICAgICAgIHRoaXMuc3RhcnROZXh0UmVxdWVzdCgpOwogICAgICB9CiAgICB9CiAgfSwKICBwcm9jZXNzUmVzcG9uc2VXaXRoSFRNTFN0cmluZzogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgIHRoaXMud2VicGFnZSA9IG5ldyBCQllURExZb3VUdWJlVmlkZW9XZWJwYWdlKHJlc3BvbnNlKTsKICAgIGlmICh0aGlzLndlYnBhZ2UuamF2YVNjcmlwdFBsYXllclVSTCAmJiB0aGlzLndlYnBhZ2UuamF2YVNjcmlwdFBsYXllclVSTC5sZW5ndGggPiAwKQogICAgewogICAgICB0aGlzLmN1cnJlbnRSZXF1ZXN0VHlwZSA9IEJCWVRETEtSZXF1ZXN0VHlwZXMuamF2YVNjcmlwdFBsYXllcjsKICAgICAgQkJZVERMVXRpbHMuc3RhcnRSZXF1ZXN0V2l0aFVSTCh0aGlzLndlYnBhZ2UuamF2YVNjcmlwdFBsYXllclVSTCwgZnVuY3Rpb24oZXJyLCBkYXRhKXsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICB0aGlzLmZpbmlzaFdpdGhFcnJvcihlcnIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlKGRhdGEpOwogICAgICAgIH0KICAgICAgfS5iaW5kKHRoaXMpKTsKICAgIH0KICAgIGVsc2UgewogICAgICBpZiAodGhpcy53ZWJwYWdlLmlzQWdlUmVzdHJpY3RlZCkgewogICAgICAgIHRoaXMuY3VycmVudFJlcXVlc3RUeXBlID0gQkJZVERMS1JlcXVlc3RUeXBlcy5lbWJlZFBhZ2U7CiAgICAgICAgQkJZVERMVXRpbHMuc2VuZFlUUmVxdWVzdCh0aGlzLnZpZGVvSWRlbnRpZmllciwgdGhpcy5sYW5ndWFnZUlkZW50aWZpZXIsIHRoaXMuY3VycmVudFJlcXVlc3RUeXBlLCBudWxsLCBmdW5jdGlvbihlcnIsIHJlc3BvbnNlKXsKICAgICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgICAgdGhpcy5maW5pc2hXaXRoRXJyb3IoZXJyKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlKTsKICAgICAgICAgIH0KICAgICAgICB9LmJpbmQodGhpcykpOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHRoaXMuc3RhcnROZXh0UmVxdWVzdCgpOwogICAgICB9CgogICAgfQogIH0sCiAgcHJvY2Vzc1Jlc3BvbnNlSmF2YVNjcmlwdFBsYXllcldpdGhTY3JpcHQ6IGZ1bmN0aW9uKHNjcmlwdFN0cmluZykgewogICAgdGhpcy5wbGF5ZXJTY3JpcHQgPSBuZXcgQkJZVERMWW91VHViZVBsYXllclNjcmlwdChzY3JpcHRTdHJpbmcpOwogICAgaWYgKCF0aGlzLndlYnBhZ2UuaXNBZ2VSZXN0cmljdGVkKSB7CiAgICAgIHZhciBldXJsID0gImV1cmw9IiArICJodHRwczovL3lvdXR1YmUuZ29vZ2xlYXBpcy5jb20vdi8iICsgdGhpcy52aWRlb0lkZW50aWZpZXI7CiAgICAgIHZhciBobCA9ICImaGw9IiArIHRoaXMubGFuZ3VhZ2VJZGVudGlmaWVyOwogICAgICB2YXIgc3RzID0gIiZzdHM9IiArIHRoaXMud2VicGFnZS5wbGF5ZXJDb25maWd1cmF0aW9uLnN0czsKICAgICAgdmFyIHZpZGVvSWQgPSAiJnZpZGVvX2lkPSIgKyB0aGlzLnZpZGVvSWRlbnRpZmllcjsKICAgICAgdmFyIHVybCA9ICJodHRwczovL3d3dy55b3V0dWJlLmNvbS9nZXRfdmlkZW9faW5mbz8iICsgZXVybCArIGhsICsgc3RzICsgdmlkZW9JZDsKICAgICAgdGhpcy5jdXJyZW50UmVxdWVzdFR5cGUgPSBCQllURExLUmVxdWVzdFR5cGVzLmdldFZpZGVvSW5mbzsKCiAgICAgIEJCWVRETFV0aWxzLnN0YXJ0UmVxdWVzdFdpdGhVUkwodXJsLCBmdW5jdGlvbihlcnIsIGRhdGEpewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIHRoaXMuZmluaXNoV2l0aEVycm9yKGVycik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgdGhpcy5wcm9jZXNzUmVzcG9uc2UoZGF0YSk7CiAgICAgICAgfQogICAgICB9LmJpbmQodGhpcykpOwogICAgfSBlbHNlwqB7CiAgICAgIHRoaXMucHJvY2Vzc1Jlc3BvbnNlR2V0VmlkZW9JbmZvKHRoaXMud2VicGFnZS52aWRlb0luZm8pOwogICAgfQogIH0sCn07CgpjbGFzcyBCQllURExZb3VUdWJlVmlkZW8gewogIGNvbnN0cnVjdG9yKGlkZW50aWZpZXIsIGluZm8sIHBsYXllclNjcmlwdCkgewogICAgdGhpcy5lcnJvciA9IG5ldyBCQllURExFcnJvcihCQllUS0Vycm9ycy5ub0Vycm9yLCBCQllUS0Vycm9ycy5ub0Vycm9yLCB7fSk7CiAgICB0aGlzLmlkZW50aWZpZXIgPSBpZGVudGlmaWVyOwogICAgdGhpcy5pbmZvID0gaW5mbzsKICAgIHRoaXMucGxheWVyU2NyaXB0ID0gcGxheWVyU2NyaXB0OwogICAgdmFyIGVycm9ySW5mbyA9IHt9OwogICAgdmFyIHN0cmVhbU1hcCA9IChpbmZvLnVybF9lbmNvZGVkX2ZtdF9zdHJlYW1fbWFwKT9pbmZvLnVybF9lbmNvZGVkX2ZtdF9zdHJlYW1fbWFwOnt9OwogICAgdmFyIGh0dHBMaXZlU3RyZWFtID0gKGluZm8uaGxzdnApP2luZm8uaGxzdnA6IiI7CiAgICB2YXIgYWRhcHRpdmVGb3JtYXRzID0gKGluZm8uYWRhcHRpdmVfZm10cyk/aW5mby5hZGFwdGl2ZV9mbXRzOiIiOwogICAgaWYgKHN0cmVhbU1hcC5sZW5ndGggPiAwIHx8IGh0dHBMaXZlU3RyZWFtLmxlbmd0aCA+IDApIHsKICAgICAgdGhpcy50aXRsZSA9IChpbmZvLnRpdGxlKT9pbmZvLnRpdGxlOiIiOwogICAgICB0aGlzLmR1cmF0aW9uID0gKGluZm8ubGVuZ3RoX3NlY29uZHMpP2luZm8ubGVuZ3RoX3NlY29uZHM6MDsKICAgICAgdGhpcy5zbWFsbFRodW1ibmFpbCA9IChpbmZvLnRodW1ibmFpbF91cmwpP2luZm8udGh1bWJuYWlsX3VybDoiIjsKICAgICAgdGhpcy5tZWRpdW1UaHVtYm5haWwgPSAoaW5mby5pdXJsc2QpP2luZm8uaXVybHNkOiIiOwogICAgICB0aGlzLmxhcmdlVGh1bWJuYWlsID0gKGluZm8uaXVybG1heHJlcyk/aW5mby5pdXJsbWF4cmVzOiIiOwoKICAgICAgdmFyIHN0cmVhbVF1ZXJpZXMgPSBzdHJlYW1NYXAuc3BsaXQoJywnKTsKICAgICAgc3RyZWFtUXVlcmllcy5jb25jYXQoYWRhcHRpdmVGb3JtYXRzLnNwbGl0KCcsJykpOwogICAgICB0aGlzLnN0cmVhbVVSTHMgPSB7fTsKICAgICAgaWYgKGh0dHBMaXZlU3RyZWFtKSB7CiAgICAgICAgc3RyZWFtVVJMc1tCQllURExLTWlzYy52aWRlb1F1YWxpdHlIVFRQTGl2ZVN0cmVhbWluZ10gPSBodHRwTGl2ZVN0cmVhbTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgc3RyZWFtUXVlcnkgaW4gc3RyZWFtUXVlcmllcykgewogICAgICAgIHZhciB5dFN0cmVhbSA9IEJCWVRETFV0aWxzLnF1ZXJ5U3RyaW5nVG9PYmplY3Qoc3RyZWFtUXVlcmllc1tzdHJlYW1RdWVyeV0pOwogICAgICAgIHZhciBzY3JhbWJsZWRTaWduYXR1cmUgPSB5dFN0cmVhbS5zOwogICAgICAgIGlmIChzY3JhbWJsZWRTaWduYXR1cmUgJiYgIXBsYXllclNjcmlwdCkgewogICAgICAgICAgZXJyb3JJbmZvW0JCWVRLRXJyb3JzLm5vU3RyZWFtVmlkZW9Vc2VySW5mb0tleV0gPSB0aGlzOwogICAgICAgICAgdGhpcy5lcnJvciA9IG5ldyBCQllURExFcnJvcihCQllUS0Vycm9ycy52aWRlb0Vycm9yRG9tYWluLCBCQllUS0Vycm9ycy55b3VUdWJlRXJyb3JVc2VDaXBoZXJTaWduYXR1cmUsIGVycm9ySW5mbyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICB2YXIgc2lnbmF0dXJlID0gbnVsbDsKICAgICAgICBpZiAodGhpcy5wbGF5ZXJTY3JpcHQgIT0gbnVsbCAmJiB0eXBlb2YgdGhpcy5wbGF5ZXJTY3JpcHQudW5zY3JhbWJsZVNpZ25hdHVyZSA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgIHNpZ25hdHVyZSA9IHRoaXMucGxheWVyU2NyaXB0LnVuc2NyYW1ibGVTaWduYXR1cmUoc2NyYW1ibGVkU2lnbmF0dXJlKTsKICAgICAgICAgICAgaWYgKHBsYXllclNjcmlwdCAmJiBzY3JhbWJsZWRTaWduYXR1cmUgJiYgIXNpZ25hdHVyZSkgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgdXJsU3RyaW5nID0gKHl0U3RyZWFtLnVybCk/eXRTdHJlYW0udXJsOiIiOwogICAgICAgIHZhciBpdGFnID0gKHl0U3RyZWFtLml0YWcpP3l0U3RyZWFtLml0YWc6LTE7CgogICAgICAgIGlmICh1cmxTdHJpbmcubGVuZ3RoPjAgJiYgaXRhZy5sZW5ndGg+MCkKICAgICAgICB7CiAgICAgICAgICB2YXIgc3RyZWFtVVJMID0gdXJsU3RyaW5nOwogICAgICAgICAgaWYgKCF0aGlzLmV4cGlyYXRpb25EYXRlKSB7CiAgICAgICAgICAgIHRoaXMuZXhwaXJhdGlvbkRhdGUgPSBCQllURExVdGlscy5leHBpcmF0aW9uRGF0ZShzdHJlYW1VUkwpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChzaWduYXR1cmUpIHsKICAgICAgICAgICAgdmFyIGVzY2FwZWRTaWduYXR1cmUgPSBlbmNvZGVVUkkoc2lnbmF0dXJlKTsKICAgICAgICAgICAgc3RyZWFtVVJMID0gdXJsU3RyaW5nICsgIiZzaWduYXR1cmU9IiArIGVzY2FwZWRTaWduYXR1cmU7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnN0cmVhbVVSTHNbaXRhZ10gPSBzdHJlYW1VUkw7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5zdHJlYW1VUkxzKS5sZW5ndGggPT09IDApCiAgICAgIHsKICAgICAgICB0aGlzLmVycm9yID0gbmV3IEJCWVRETEVycm9yKEJCWVRLRXJyb3JzLnZpZGVvRXJyb3JEb21haW4sIEJCWVRLRXJyb3JzLnlvdVR1YmVFcnJvck5vU3RyZWFtQXZhaWxhYmxlLCB7fSk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UgewogICAgICB2YXIgcmVhc29uID0gaW5mby5yZWFzb247CiAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLmxlbmd0aCA+IDApIHsKICAgICAgICBlcnJvckluZm9bQkJZVEtFcnJvcnMuZXJyb3JEZXNjcmlwdGlvbkluZm9LZXldID0gcmVhc29uOwogICAgICB9CiAgICAgIHZhciBlcnJvckNvZGUgPSBpbmZvLmVycm9yY29kZT9pbmZvLmVycm9yY29kZTpCQllUS0Vycm9ycy55b3VUdWJlRXJyb3JOb1N0cmVhbUF2YWlsYWJsZTsKICAgICAgdGhpcy5lcnJvciA9IG5ldyBCQllURExFcnJvcihCQllUS0Vycm9ycy52aWRlb0Vycm9yRG9tYWluLCBlcnJvckNvZGUsIGVycm9ySW5mbyk7CiAgICB9CiAgfQp9CgpjbGFzcyBCQllURExVdGlscyB7CiAgc3RhdGljIHF1ZXJ5U3RyaW5nVG9PYmplY3QgKHF1ZXJ5U3RyaW5nKSB7CiAgICB2YXIgcXVlcnlTdHJpbmdPYmogPSB7fTsKICAgIHZhciB2YXJzID0gcXVlcnlTdHJpbmcuc3BsaXQoJyYnKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFycy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBwYWlyID0gdmFyc1tpXS5zcGxpdCgnPScpOwogICAgICAgIHZhciBrZXkgPSBkZWNvZGVVUklDb21wb25lbnQocGFpclswXSk7CiAgICAgICAgdmFyIHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pOwogICAgICAgIHF1ZXJ5U3RyaW5nT2JqW2tleV0gPSB2YWx1ZTsKICAgIH0KICAgIHJldHVybiBxdWVyeVN0cmluZ09iajsKICB9CgogIHN0YXRpYyBzZW5kWVRSZXF1ZXN0ICh2aWRlb0lkLCBsYW5ndWFnZUlkLCB5dFJlcXVlc3RUeXBlLCBldmVudExhYmVsLCBjYikgewogICAgdmFyIHVybCA9ICBCQllURExVdGlscy5nZW5lcmF0ZVlUVXJsKHZpZGVvSWQsIGxhbmd1YWdlSWQsIHl0UmVxdWVzdFR5cGUsIGV2ZW50TGFiZWwpOwogICAgQkJZVERMVXRpbHMuc3RhcnRSZXF1ZXN0V2l0aFVSTCh1cmwsIGZ1bmN0aW9uKGVyciwgZGF0YSl7CiAgICAgIGlmIChlcnIpIHsKICAgICAgICBjYihlcnIsIG51bGwpOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIGNiKG51bGwsIGRhdGEpOwogICAgICB9CiAgICB9KTsKICB9CgogIHN0YXRpYyBzdGFydFJlcXVlc3RXaXRoVVJMKHVybCwgY2IpIHsKICAgIHJlcXVlc3RDb3VudCsrOwogICAgaWYgKHJlcXVlc3RDb3VudCA+IDYpIHsKICAgICAgdmFyIGVyciA9IHsKICAgICAgICBodHRwQ29kZTogQkJZVEtSZXN1bHRDb2RlLm1heE51bWJlck9mUmVxdWVzdHNSZWFjaGVkLAogICAgICAgIG1lc3NhZ2U6ICJtYXhpbXVtIG51bWJlciBvZiByZXF1ZXN0cyByZWFjaGVkIgogICAgICB9OwogICAgICBjYihlcnIsIG51bGwpOwogICAgICByZXR1cm47CiAgICB9CiAgICBlbHNlIHsKICAgICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSFRUUFJlcXVlc3QoKTsKICAgICAgLy9jb25zb2xlLmxvZygiU3RhcnRpbmcgcmVxdWVzdDogIiAgKyB1cmwpOwogICAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiB4bWxodHRwLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgdmFyIGRhdGEgPSB4bWxodHRwLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgY2IobnVsbCwgZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBlcnIgPSB7CiAgICAgICAgICAgIGh0dHBDb2RlOiB4bWxodHRwLnN0YXR1cywKICAgICAgICAgICAgbWVzc2FnZTogImVycm9yIHNlbmRpbmcgcmVxdWVzdCIKICAgICAgICAgIH07CiAgICAgICAgICBjYihlcnIsIG51bGwpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgeG1saHR0cC5vcGVuKCJHRVQiLCB1cmwpOwogICAgICB4bWxodHRwLnNlbmQoKTsKICAgIH0KICB9CgogIHN0YXRpYyBnZW5lcmF0ZVlUVXJsKHZpZGVvSWQsIGxhbmd1YWdlSWQsIHl0UmVxdWVzdFR5cGUsIGV2ZW50TGFiZWwpIHsKICAgIHZhciB1cmwgPSAiIjsKICAgIHZhciBxdWVyeVN0cmluZyA9ICIiOwogICAgc3dpdGNoICh5dFJlcXVlc3RUeXBlKSB7CiAgICAgIGNhc2UgQkJZVERMS1JlcXVlc3RUeXBlcy5nZXRWaWRlb0luZm86CiAgICAgICAgICB1cmwgPSBCQllURExLVXJscy5nZXRWaWRlb0luZm87CiAgICAgICAgICBxdWVyeVN0cmluZyA9ICJlbD0iICsgZXZlbnRMYWJlbCArICImaGw9IiArIGxhbmd1YWdlSWQgKyAiJnBzPWRlZmF1bHQmdmlkZW9faWQ9IiArIHZpZGVvSWQ7CiAgICAgICAgICBicmVhazsKICAgICAgY2FzZSBCQllURExLUmVxdWVzdFR5cGVzLndhdGNoVmlkZW86CiAgICAgICAgICB1cmwgPSBCQllURExLVXJscy53YXRjaFZpZGVvOwogICAgICAgICAgcXVlcnlTdHJpbmcgPSAidj0iICsgdmlkZW9JZCArICImaGw9IiArIGxhbmd1YWdlSWQgKyAiJmhhc192ZXJpZmllZD10cnVlIjsKICAgICAgICAgIGJyZWFrOwogICAgICBjYXNlIEJCWVRETEtSZXF1ZXN0VHlwZXMuZW1iZWRQYWdlOgogICAgICAgIHVybCA9IEJCWVRETEtVcmxzLmVtYmVkVVJMU3RyaW5nOwogICAgICAgIHF1ZXJ5U3RyaW5nID0gdmlkZW9JZDsKICAgICAgICBicmVhazsKICAgIH0KICAgIHJldHVybiB1cmwgKyBxdWVyeVN0cmluZzsKICB9CgogIHN0YXRpYyBmb3JjZUJyZWFrKCkgewogICAgdHJ5IHsKICAgICAgdGhyb3cgImJyZWFrISI7CiAgICB9IGNhdGNoKCBleCApIHsKCiAgICB9CiAgfQoKICBzdGF0aWMgZXhwaXJhdGlvbkRhdGUoc3RyZWFtVVJMKSB7CiAgICB2YXIgcXVlcnkgPSBCQllURExVdGlscy5xdWVyeVN0cmluZ1RvT2JqZWN0KHN0cmVhbVVSTCk7CiAgICB2YXIgZXhwaXJlID0gcXVlcnkuZXhwaXJlOwogICAgaWYgKGV4cGlyZSA+IDApCiAgICAgIHJldHVybiBleHBpcmU7CiAgICByZXR1cm47CiAgfQp9CgpjbGFzcyBCQllURExFcnJvciB7CiAgY29uc3RydWN0b3IoZURvbWFpbiwgZUNvZGUsIGVFcnJvckluZm8pIHsKICAgIHRoaXMuZXJyb3JEb21haW4gPSBlRG9tYWluOwogICAgdGhpcy5lcnJvckNvZGUgPSBlQ29kZTsKICAgIHRoaXMuZXJyb3JJbmZvID0gZUVycm9ySW5mbzsKICB9Cn0KCnZhciBkb2N1bWVudCA9IHsgZG9jdW1lbnRFbGVtZW50OiB7fSB9Owp2YXIgbG9jYXRpb24gPSB7IGhhc2g6ICIiIH07CnZhciBuYXZpZ2F0b3IgPSB7IHVzZXJBZ2VudDogIiIgfTsKdmFyIHdpbmRvdyA9IHsKICBkb2N1bWVudDogeyBkb2N1bWVudEVsZW1lbnQ6IHt9IH0sCiAgbG9jYXRpb246IHsgaGFzaDogIiIgfSwKICBuYXZpZ2F0b3I6IHsgdXNlckFnZW50OiAiIiB9Cn07CgpmdW5jdGlvbiBldmFsU2NyaXB0KHNjcmlwdCkgewogIHl0ZGxBZGRTY3JpcHRUb0NvbnRleHQoc2NyaXB0KTsKfQoKCmNsYXNzIEJCWVRETFlvdVR1YmVQbGF5ZXJTY3JpcHQgewogIGNvbnN0cnVjdG9yKHNjcmlwdFN0cmluZykgewogICAgc2NyaXB0U3RyaW5nID0gc2NyaXB0U3RyaW5nLnJlcGxhY2UoLyhcbnxccnxcclxuKS9nLCIgIik7CiAgICB2YXIgYW5vbnltb3VzRnVuY3Rpb25SZWd1bGFyRXhwcmVzc2lvbiA9IG5ldyBSZWdFeHAoJ1xcKGZ1bmN0aW9uXFwoW14pXSpcXClcXHsoLiopXFx9XFwpXFwoW14pXSpcXCknKTsKICAgIHZhciBmdW5jdGlvblJlc3VsdHMgPSBhbm9ueW1vdXNGdW5jdGlvblJlZ3VsYXJFeHByZXNzaW9uLmV4ZWMoc2NyaXB0U3RyaW5nKTsKICAgIHZhciBzY3JpcHQgPSAnJzsKICAgIGlmIChmdW5jdGlvblJlc3VsdHMubGVuZ3RoID4gMSkgewogICAgICBzY3JpcHQgPSBmdW5jdGlvblJlc3VsdHNbMV07CiAgICAgIHRyeSB7CiAgICAgICAgZXZhbFNjcmlwdChzY3JpcHQpOwogICAgICAgIHZhciBzaWduYXR1cmVSZWd1bGFyRXhwcmVzc2lvbiA9IG5ldyBSZWdFeHAoIltcIiddc2lnbmF0dXJlW1wiJ11cXHMqLFxccyooW15cXChdKykiKTsKICAgICAgICB2YXIgc2lnbmF0dXJlUmVzdWx0cyA9IHNpZ25hdHVyZVJlZ3VsYXJFeHByZXNzaW9uLmV4ZWMoc2NyaXB0KTsKICAgICAgICB2YXIgc2lnbmF0dXJlRnVuY3Rpb25OYW1lID0gJyc7CiAgICAgICAgaWYgKHNpZ25hdHVyZVJlc3VsdHMubGVuZ3RoID4gMSkgewogICAgICAgICAgdGhpcy5zaWduYXR1cmVGdW5jdGlvbiA9IHNpZ25hdHVyZVJlc3VsdHNbMV07CiAgICAgICAgfQogICAgICB9IGNhdGNoKGUpIHsKICAgICAgICB2YXIgZXJyID0gZS5jb25zdHJ1Y3RvcignRXJyb3IgaW4gRXZhbGVkIFNjcmlwdDogJyArIGUubWVzc2FnZSk7CiAgICAgICAgZXJyLmxpbmVOdW1iZXIgPSBlLmxpbmVOdW1iZXIgLSBlcnIubGluZU51bWJlciArIDM7CiAgICAgICAgdGhyb3cgZXJyOwogICAgICB9CiAgICB9CiAgfQoKICB1bnNjcmFtYmxlU2lnbmF0dXJlIChzaWduYXR1cmUpIHsKICAgIGlmICh0aGlzLnNpZ25hdHVyZUZ1bmN0aW9uICYmIHRoaXMuc2lnbmF0dXJlRnVuY3Rpb24ubGVuZ3RoPjAgJiYgc2lnbmF0dXJlICYmIHNpZ25hdHVyZS5sZW5ndGggPiAwKSB7CiAgICAgIHZhciBmbiA9IGV2YWwodGhpcy5zaWduYXR1cmVGdW5jdGlvbik7CiAgICAgIGlmICh0eXBlb2YgZm4gPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICByZXR1cm4gZm4uYXBwbHkobnVsbCwgW3NpZ25hdHVyZV0pOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gewogICAgICBlcnJDb2RlOiAxLAogICAgICBkZXNjcmlwdGlvbjogIlVuc2NyYW1ibGUgc2lnbmF0dXJlIGZhaWxlZCIKICAgIH07CiAgfQp9CgpjbGFzcyBCQllURExZb3VUdWJlVmlkZW9XZWJwYWdlIHsKICBjb25zdHJ1Y3RvcihodG1sKSB7CiAgICB0aGlzLmh0bWwgPSBodG1sOwogICAgdGhpcy5wbGF5ZXJDb25maWd1cmF0aW9uID0gdGhpcy5nZXRQbGF5ZXJDb25maWd1cmF0aW9uKCk7CiAgICBpZiAodGhpcy5wbGF5ZXJDb25maWd1cmF0aW9uICE9IG51bGwpIHsKICAgICAgdGhpcy5qYXZhU2NyaXB0UGxheWVyVVJMID0gdGhpcy5nZXRKYXZhU2NyaXB0UGxheWVyVVJMKCk7CiAgICAgIHRoaXMudmlkZW9JbmZvID0gdGhpcy5nZXRWaWRlb0luZm8oKTsKICAgICAgLy8gdGhpcy5yZWdpb25zQWxsb3dlZCA9IHRoaXMuZ2V0UmVnaW9uc0FsbG93ZWQoKTsKICAgIH0KCiAgICB0aGlzLmlzQWdlUmVzdHJpY3RlZCA9IHRoaXMuZ2V0SXNBZ2VSZXN0cmljdGVkKCk7CiAgfQoKICBnZXRQbGF5ZXJDb25maWd1cmF0aW9uKCkgewogICAgaWYgKCF0aGlzLnBsYXllckNvbmZpZ3VyYXRpb24pIHsKICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgieXRwbGF5ZXIuY29uZmlnXFxzKj1cXHMqKFxcey4qP1xcfSk7fFxcKFxccyonUExBWUVSX0NPTkZJRycsXFxzKihcXHsuKj9cXH0pXFxzKlxcKSIpOwogICAgICAvLyB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCd5dHBsYXllci5jb25maWdcXHMqPVxccyooXFx7Lio/XFx9KTsnKTsKCiAgICAgIHZhciByZXN1bHRzID0gcmVnZXguZXhlYyh0aGlzLmh0bWwpOwogICAgICBmb3IgKHZhciByZXN1bHQgaW4gcmVzdWx0cykgewogICAgICAgIHZhciByZXNUZXh0ID0gZW5jb2RlVVJJKHJlc3VsdHNbcmVzdWx0XSk7CiAgICAgICAgcmVzVGV4dCA9IGRlY29kZVVSSShyZXNUZXh0KTsKICAgICAgICAvL1ZFVk8gVklERU9TCiAgICAgICAgcmVzVGV4dCA9IHJlc1RleHQucmVwbGFjZSgieXRwbGF5ZXIuY29uZmlnID0gIiwgIiIpOwogICAgICAgIC8vCiAgICAgICAgcmVzVGV4dCA9IHJlc1RleHQucmVwbGFjZSgiKCdQTEFZRVJfQ09ORklHJywgIiwgIiIpOwogICAgICAgIHJlc1RleHQgPSByZXNUZXh0LnN1YnN0cmluZygwLCByZXNUZXh0Lmxlbmd0aC0xKTsKICAgICAgICB2YXIgcGxheWVyQ29uZmlndXJhdGlvbiA9IEpTT04ucGFyc2UocmVzVGV4dCk7CiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHBsYXllckNvbmZpZ3VyYXRpb24pLmxlbmd0aD4wKSB7CiAgICAgICAgICB0aGlzLnBsYXllckNvbmZpZ3VyYXRpb24gPSBwbGF5ZXJDb25maWd1cmF0aW9uOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5wbGF5ZXJDb25maWd1cmF0aW9uOwogIH0KCiAgZ2V0VmlkZW9JbmZvKCkgewogICAgaWYgKCF0aGlzLnZpZGVvSW5mbykgewogICAgICB2YXIgYXJncyA9IHRoaXMucGxheWVyQ29uZmlndXJhdGlvbi5hcmdzOwogICAgICB2YXIgaW5mbyA9IHt9OwogICAgICBmb3IgKHZhciBhcmcgaW4gYXJncykgewogICAgICAgIGlmICgoKHR5cGVvZiBhcmdzW2FyZ10pID09ICdzdHJpbmcnKSB8fCAoKHR5cGVvZiBhcmdzW2FyZ10pID09ICdudW1iZXInKSkgewogICAgICAgICAgaW5mb1thcmddID0gYXJnc1thcmddOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnZpZGVvSW5mbyA9IGluZm87CiAgICB9CiAgICByZXR1cm4gdGhpcy52aWRlb0luZm87CiAgfQoKICBnZXRKYXZhU2NyaXB0UGxheWVyVVJMKCkgewogICAgaWYgKCF0aGlzLmphdmFTY3JpcHRQbGF5ZXJVUkwpIHsKICAgICAgdmFyIGpzQXNzZXRzID0gdGhpcy5wbGF5ZXJDb25maWd1cmF0aW9uLmFzc2V0cy5qczsKICAgICAgaWYgKCh0eXBlb2YganNBc3NldHMpID09ICdzdHJpbmcnKSB7CiAgICAgICAgdmFyIGphdmFTY3JpcHRQbGF5ZXJVUkxTdHJpbmcgPSBqc0Fzc2V0czsKICAgICAgICBpZiAoamF2YVNjcmlwdFBsYXllclVSTFN0cmluZy5zdWJzdHJpbmcoMCwgMikgPT0gIi8vIikgewogICAgICAgICAgICBqYXZhU2NyaXB0UGxheWVyVVJMU3RyaW5nID0gImh0dHBzOiIgKyBqc0Fzc2V0czsKICAgICAgICB9CiAgICAgICAgdGhpcy5qYXZhU2NyaXB0UGxheWVyVVJMID0gamF2YVNjcmlwdFBsYXllclVSTFN0cmluZzsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHRoaXMuamF2YVNjcmlwdFBsYXllclVSTDsKICB9CgogIGdldElzQWdlUmVzdHJpY3RlZCgpIHsKICAgIGlmICghdGhpcy5pc0FnZVJlc3RyaWN0ZWQpIHsKICAgICAgdGhpcy5pc0FnZVJlc3RyaWN0ZWQgPSB0aGlzLmh0bWwuaW5kZXhPZigib2c6cmVzdHJpY3Rpb25zOmFnZSIpID4gLTE7CiAgICB9CiAgICByZXR1cm4gdGhpcy5pc0FnZVJlc3RyaWN0ZWQ7CiAgfQoKICBnZXRSZWdpb25zQWxsb3dlZCgpIHsKICAgIGlmICghdGhpcy5yZWdpb25zQWxsb3dlZCkgewogICAgICB2YXIgcmVnaW9uc0FsbG93ZWQgPSBbXTsKICAgICAgdmFyIHJlZ2V4ID0gIm1ldGFcXHMraXRlbXByb3A9XCJyZWdpb25zQWxsb3dlZFwiXFxzK2NvbnRlbnQ9XCIoLiopXCIiOwogICAgICB2YXIgcmVnaW9ucyA9IHRoaXMuaHRtbC5tYXRjaChyZWdleCk7CiAgICAgIGlmIChyZWdpb25zLmxlbmd0aCA+IDApIHsKICAgICAgICByZWdpb25zQWxsb3dlZCA9IHJlZ2lvbnNbMV07CiAgICAgIH0KICAgICAgdGhpcy5yZWdpb25zQWxsb3dlZCA9IHJlZ2lvbnNBbGxvd2VkOwogICAgfQogICAgcmV0dXJuIHRoaXMucmVnaW9uc0FsbG93ZWQ7CiAgfQp9Cg=="
}
